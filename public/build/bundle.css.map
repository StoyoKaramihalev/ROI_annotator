{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../../App.svelte"
  ],
  "sourcesContent": [
    "<script>\n  let files = []\n  let selecting = false\n  let duration = 5\n  let r = 5\n  let currentTime = 0\n  let roi = []\n  let circles = []\n  let regions = {}\n  let regionCount = 0\n  let width = 600\n  let height = 400\n  let svg\n\n\n  const onClick = ({x, y}) => {\n    if (!selecting) return\n    let cx = x - svgPos.left\n    let cy = y - svgPos.top\n    if (circles.length > 1) {\n      let fx = circles[0].x\n      let fy = circles[0].y\n      if (Math.abs(cx - fx) <= r && Math.abs(cy - fy) <= r){\n        cx = fx\n        cy = fy\n        selecting = false\n      }\n    }\n\n    roi = [...roi, {x: cx, y: cy}]\n    circles = [...circles, {x: cx, y: cy}]\n  }\n  const clear = () => {\n    circles = []\n    roi = []\n  }\n  const save = () => {\n    regions[videoName + '_' + currentTime + (++regionCount)] = roi.slice()\n    roi = []\n    circles = []\n  }\n\n\n  $: svgPos = svg && {left: svg.getBoundingClientRect().x, top: svg.getBoundingClientRect().y}\n  $: points = roi.map(({x, y}) => `${x},${y}`).join(' ')\n  $: video = files.length > 0 ? files[0] : null\n  $: videoUrl =  video ? URL.createObjectURL(video) : ''\n  $: videoName = video ? video.name : 'unknown'\n</script>\n\n<header>\n  <h1>ROI annotator</h1>\n</header>\n\n<main class:pointer={selecting}>\n\t<p>Select video: <input type=\"file\" accept=\"video/*\" bind:files></p>\n  <input type=\"range\" min=\"0\" max={duration} step=\"0.1\" bind:value={currentTime} />\n  <button on:click={() => selecting = true}>Define ROI</button>\n  <button on:click={clear}>Clear ROI</button>\n  <button disabled={roi.length < 4} on:click={save}>Save ROI</button>\n  <div class=\"container\" on:click={onClick}>\n    <svg bind:this={svg}>\n      {#each Object.values(regions) as r}\n        <polyline points={r.map(({x, y}) => `${x},${y}`).join(' ')} fill=\"none\" stroke=\"red\" stroke-width=\"2\"/>\n      {/each}\n      <polyline {points} fill=\"none\" stroke=\"white\" stroke-width=\"2\" stroke-dasharray=\"10,10\"/>\n      {#each circles as {x, y}}\n        <circle cx={x} cy={y} {r} fill=\"white\"/>\n      {/each}\n    </svg>\n    <video src={videoUrl} bind:currentTime bind:duration />\n  </div>\n  <ul>\n  {#each Object.keys(regions) as region}\n    <li>{region}</li>\n  {/each}\n  </ul>\n  {#if Object.keys(regions).length > 0}\n  <a download=\"regions.json\"\n    href={`data:application/json,${JSON.stringify(regions, null, 2)}`}>Download regions</a>\n  {/if}\n</main>\n\n<footer>\n  <p>Developed by: <a href=\"https://github.com/mkaramihalev\">Marin Karamihalev</a></p>\n  <p><a href=\"https://github.com/mkaramihalev/stoyo-roi\">Repository</a> on GitHub</p>\n</footer>\n\n<style>\n\n  header {\n    text-align: center;\n    background: rgb(240, 240, 240);\n    padding: 1em;\n  }\n\n\tmain {\n\t\ttext-align: center;\n\t\tpadding: 1em;\n\t\tmax-width: 240px;\n    margin: 0 auto;\n    background: rgb(255, 255, 255);\n    width: 100%;\n    height: 75%;\n\t}\n\n  .pointer {\n    cursor: pointer;\n  }\n\n  .container {\n    width: 90vw;\n    height: 60vh;\n    position: relative;\n  }\n\n  svg {\n    z-index: 2;\n    position: absolute;\n    height: 100%;\n    width: 100%;\n  }\n\n\tvideo {\n    z-index: 1;\n    height: 100%;\n    width: 100%;\n  }\n\n\t@media (min-width: 640px) {\n\t\tmain {\n\t\t\tmax-width: none;\n\t\t}\n\t}\n</style>\n"
  ],
  "names": [],
  "mappings": "AA0FE,MAAM,eAAC,CAAC,AACN,UAAU,CAAE,MAAM,CAClB,UAAU,CAAE,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAC9B,OAAO,CAAE,GAAG,AACd,CAAC,AAEF,IAAI,eAAC,CAAC,AACL,UAAU,CAAE,MAAM,CAClB,OAAO,CAAE,GAAG,CACZ,SAAS,CAAE,KAAK,CACd,MAAM,CAAE,CAAC,CAAC,IAAI,CACd,UAAU,CAAE,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAC9B,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,GAAG,AACd,CAAC,AAEA,QAAQ,eAAC,CAAC,AACR,MAAM,CAAE,OAAO,AACjB,CAAC,AAED,UAAU,eAAC,CAAC,AACV,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,QAAQ,CAAE,QAAQ,AACpB,CAAC,AAED,GAAG,eAAC,CAAC,AACH,OAAO,CAAE,CAAC,CACV,QAAQ,CAAE,QAAQ,CAClB,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,IAAI,AACb,CAAC,AAEF,KAAK,eAAC,CAAC,AACJ,OAAO,CAAE,CAAC,CACV,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,IAAI,AACb,CAAC,AAEF,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AAC1B,IAAI,eAAC,CAAC,AACL,SAAS,CAAE,IAAI,AAChB,CAAC,AACF,CAAC"
}